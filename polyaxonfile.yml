version: 1.1

kind: component
name: fabric

run:
  kind: job
  init:
    - git:
        url: 'https://github.com/granularai/fabric'
        revision: feature/log_model_xp
  connections: [datasets, artifacts-store]
  container:
    image: gcr.io/granular-ai/training-base:nightly
    command:
      - pip
      - install -r
      - requirements.txt
      - &&
      - python
      - train.py
    name: fabric
    workingDir: '{{ globals.artifacts_path }}/fabric'
